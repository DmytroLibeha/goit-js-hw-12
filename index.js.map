{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default getPictures;\nimport axios from 'axios';\n\nasync function getPictures(tag, page) {\n  const API_URL = 'https://pixabay.com/api/';\n  const API_KEY = '47395064-b7fd47e3542f1aea6492dfd3a';\n  return await axios.get(\n    `${API_URL}/?image_type=photo&orientation=horizontal&safesearch=true&key=${API_KEY}`,\n    {\n      params: {\n        q: tag,\n        page,\n        per_page: 15,\n      },\n    }\n  );\n}\n","export default function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"list-item\" >\n    <a href=\"${largeImageURL}\" alt=\"${tags}\" title=\"\"/>\n    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img-item\">\n    <div class=\"list-container\">\n    <p class=\"item\"><span class=\"item-text\">Likes</span> <span>${likes}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Views</span> <span>${views}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Comments</span> <span>${comments}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Downloads</span> <span>${downloads}</span></p>\n    </div></a>\n  </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getPictures from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nconst litebox = new SimpleLightbox('.list-js a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\nconst form = document.querySelector('.form-js');\nconst list = document.querySelector('.list-js');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nform.addEventListener('submit', toSabmit);\nloadBtn.addEventListener('click', onLoadMore);\nlet page = 1;\nlet totalPage = 1;\nlet currentSearch = '';\n\nfunction toSabmit(evt) {\n  evt.preventDefault();\n\n  const { picture } = evt.target.elements;\n  currentSearch = picture.value.trim();\n\n  list.innerHTML = '';\n  if (!currentSearch) {\n    {\n      iziToast.show({\n        title: 'Error',\n        message: 'Please add request!',\n        position: 'center',\n      });\n      return;\n    }\n  }\n\n  page = 1;\n\n  loader.classList.remove('hidden');\n  loadBtn.classList.replace('more-btn', 'hidden');\n  getPictures(currentSearch, page)\n    .then(({ data: { hits, totalHits } }) => {\n      totalPage = Math.ceil(totalHits / 15);\n\n      if (!hits.length) {\n        iziToast.show({\n          title: 'No Results',\n          message: 'Please enter a valid search query!',\n          position: 'center',\n        });\n        return;\n      }\n      list.innerHTML = createMarkup(hits);\n      litebox.refresh();\n      if (totalPage === 1) {\n        iziToast.show({\n          title: 'End of Results',\n          message: 'No more images found for your query.',\n          position: 'center',\n        });\n        loadBtn.classList.replace('more-btn', 'hidden');\n      } else {\n        loadBtn.classList.replace('hidden', 'more-btn');\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        title: 'Error',\n        message: `Something went wrong: ${error.message}. Please try again later.`,\n        position: 'center',\n      });\n    })\n    .finally(() => {\n      picture.value = '';\n      loader.classList.add('hidden');\n    });\n}\nasync function onLoadMore() {\n  page += 1;\n  loadBtn.disabled = true;\n  loader.classList.remove('hidden');\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPictures(currentSearch, page);\n\n    list.insertAdjacentHTML('beforeend', createMarkup(hits));\n    litebox.refresh();\n\n    if (page >= totalPage || !totalHits) {\n      loadBtn.classList.replace('more-btn', 'hidden');\n      iziToast.show({\n        title: 'End of results',\n        message: 'Sorry, there are no more images matching your request.',\n        position: 'center',\n      });\n    }\n    const item = document.querySelector('.list-item');\n    const itemHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2.5,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}. Please try again later.`,\n      position: 'center',\n    });\n  } finally {\n    loader.classList.add('hidden');\n    loadBtn.disabled = false;\n  }\n}\n"],"names":["getPictures","tag","page","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","litebox","SimpleLightbox","form","list","loader","loadBtn","toSabmit","onLoadMore","totalPage","currentSearch","evt","picture","iziToast","hits","totalHits","error","itemHeight"],"mappings":"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"}