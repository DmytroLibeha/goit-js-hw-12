{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default getPictures;\nimport axios from 'axios';\n\nasync function getPictures(tag, page) {\n  const API_URL = 'https://pixabay.com/api/';\n  const API_KEY = '47395064-b7fd47e3542f1aea6492dfd3a';\n  return await axios.get(\n    `${API_URL}/?q=${tag}&image_type=photo&orientation=horizontal&safesearch=true&key=${API_KEY}`,\n    {\n      params: {\n        page,\n        per_page: 15,\n      },\n    }\n  );\n}\n","export default function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"list-item\" >\n    <a href=\"${largeImageURL}\" alt=\"${tags}\" title=\"\"/>\n    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img-item\">\n    <div class=\"list-container\">\n    <p class=\"item\"><span class=\"item-text\">Likes</span> <span>${likes}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Views</span> <span>${views}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Comments</span> <span>${comments}</span></p>\n    <p class=\"item\"><span class=\"item-text\">Downloads</span> <span>${downloads}</span></p>\n    </div></a>\n  </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getPictures from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nconst litebox = new SimpleLightbox('.list-js a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\nconst form = document.querySelector('.form-js');\nconst list = document.querySelector('.list-js');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nform.addEventListener('submit', toSabmit);\nloadBtn.addEventListener('click', onLoadMore);\nlet page = 1;\nlet totalPage = 1;\n\nfunction toSabmit(evt) {\n  evt.preventDefault();\n\n  const { picture } = evt.target.elements;\n  const value = picture.value.trim();\n\n  list.innerHTML = '';\n  if (!value || value === ' ') {\n    {\n      iziToast.show({\n        title: 'Error',\n        message: 'Please add request!',\n        position: 'center',\n      });\n      list.innerHTML = '';\n      return;\n    }\n  }\n\n  page = 1;\n\n  loader.classList.remove('hidden');\n  loadBtn.classList.replace('more-btn', 'hidden');\n  getPictures(value, page)\n    .then(({ data: { hits, totalHits } }) => {\n      totalPage = Math.ceil(totalHits / hits.length);\n\n      if (!hits.length) {\n        iziToast.show({\n          title: 'No Results',\n          message: 'Please enter a valid search query!',\n          position: 'center',\n        });\n      } else {\n        list.innerHTML = createMarkup(hits);\n        litebox.refresh();\n        if (page >= totalPage) {\n          loadBtn.classList.replace('more-btn', 'hidden');\n        }\n        loadBtn.classList.replace('hidden', 'more-btn');\n      }\n    })\n    .catch(error => {\n      console.log(error.message);\n      iziToast.show({\n        title: 'Error',\n        message: `Something went wrong: ${error.message}. Please try again later.`,\n        position: 'center',\n      });\n    })\n    .finally(() => {\n      picture.value = '';\n      loader.classList.add('hidden');\n    });\n}\nasync function onLoadMore() {\n  page += 1;\n\n  loadBtn.disabled = true;\n  try {\n    const {\n      data: { hits, totalHits },\n    } = await getPictures(page);\n\n    list.insertAdjacentHTML('beforeend', createMarkup(hits));\n    totalPage = Math.ceil(totalHits / hits.length);\n\n    if (page >= totalPage || !totalHits) {\n      loadBtn.classList.replace('more-btn', 'hidden');\n      iziToast.show({\n        title: 'End of results',\n        message: 'Sorry, there are no more images matching your request.',\n        position: 'center',\n      });\n    }\n    const item = document.querySelector('.list-item');\n    const itemHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2.5,\n      behavior: 'smooth',\n    });\n    litebox.refresh();\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}. Please try again later.`,\n      position: 'center',\n    });\n  } finally {\n    loadBtn.disabled = false;\n  }\n}\n"],"names":["getPictures","tag","page","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","litebox","SimpleLightbox","form","list","loader","loadBtn","toSabmit","onLoadMore","totalPage","evt","picture","value","iziToast","hits","totalHits","error","itemHeight"],"mappings":"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"}